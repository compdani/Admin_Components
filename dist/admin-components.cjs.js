"use strict";const e=require("vue"),Ye=require("ace-builds"),Z=(t,n)=>{const o=t.__vccOpts||t;for(const[r,a]of n)o[r]=a;return o},Ze=["innerHTML"],Qe=["innerHTML","onContextmenu"],et={__name:"JsonComponents",props:e.mergeModels({draggable_pro:{type:Boolean,default:!0}},{modelValue:{},modelModifiers:{}}),emits:e.mergeModels(["updateSections","openEdit"],["update:modelValue"]),setup(t,{emit:n}){const o=e.useModel(t,"modelValue"),r=n;function a(i){const f={};return f[i]?f[i]:i}function l(i,f,m){r("openEdit",{event:i,element:f,path:[m]})}function c(i,f,m,b){let g=[];m!==null&&g.push(m),f!==null&&g.push(f),b==="children"?(g.push("children"),i.path&&(g=[...g,...i.path])):b==="slot"&&(i.path?(g.push("slots",f,"children"),g=[...g,...i.path]):g.push("slots",f)),r("openEdit",{event:i.event,element:i.element,path:g})}function u(i,f,m,b){r("openEdit",{event:i,element:f.slots[b],path:[m,"slots",b]})}return(i,f)=>(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,(m,b)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(a(m.component)),e.mergeProps({ref_for:!0},m.props,{onContextmenu:e.withModifiers(g=>l(g,m,b),["stop"])}),e.createSlots({default:e.withCtx(()=>[m.children?(e.openBlock(),e.createBlock(pe,{key:0,modelValue:m.children,"onUpdate:modelValue":g=>m.children=g,draggable_pro:t.draggable_pro,onOpenEdit:g=>c(g,null,b,"children")},null,8,["modelValue","onUpdate:modelValue","draggable_pro","onOpenEdit"])):e.createCommentVNode("",!0),m.htmlContent?(e.openBlock(),e.createElementBlock("div",{key:1,innerHTML:m.htmlContent},null,8,Ze)):e.createCommentVNode("",!0),m.textContent?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createTextVNode(e.toDisplayString(m.textContent),1)],64)):e.createCommentVNode("",!0)]),_:2},[e.renderList(m.slots,(g,C)=>({name:g.name,fn:e.withCtx(()=>[g.children?(e.openBlock(),e.createBlock(pe,{key:0,modelValue:g.children,"onUpdate:modelValue":y=>g.children=y,draggable_pro:t.draggable_pro,onOpenEdit:y=>c(y,C,b,"slot")},null,8,["modelValue","onUpdate:modelValue","draggable_pro","onOpenEdit"])):e.createCommentVNode("",!0),g.htmlContent?(e.openBlock(),e.createElementBlock("div",{key:1,innerHTML:g.htmlContent,onContextmenu:e.withModifiers(y=>u(y,m,b,C),["stop"])},null,40,Qe)):e.createCommentVNode("",!0),g.textContent?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createTextVNode(e.toDisplayString(g.textContent),1)],64)):e.createCommentVNode("",!0)])}))]),1040,["onContextmenu"]))),256))}},pe=Z(et,[["__scopeId","data-v-e879fa16"]]),tt={content_css:["https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"],height:"60vh",plugins:"code preview searchreplace autolink directionality visualblocks visualchars fullscreen image link media codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help",toolbar:"formatselect | bold italic forecolor backcolor | code | link image media | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent",toolbar_drawer:"floating",valid_elements:"*[*]",image_advtab:!0,license_key:"74ca372jx03ojgry4czoi2g59d4pruuozmudnvfqwzs742yz"},nt=["div","p","h1","h2","h3","h4","h5","h6","v-divider","v-list-item","v-list-item-group","v-list","v-card","v-card-title","v-card-subtitle","v-card-text","v-card-actions","v-btn","iframe","v-img","v-col","v-row","v-container"];var ot=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],lt=function(t){return ot.map(function(n){return n.toLowerCase()}).indexOf(t.toLowerCase())!==-1},rt=function(t,n,o){Object.keys(n).filter(lt).forEach(function(r){var a=n[r];typeof a=="function"&&(r==="onInit"?a(t,o):o.on(r.substring(2),function(l){return a(l,o)}))})},at=function(t,n,o,r){var a=t.modelEvents?t.modelEvents:null,l=Array.isArray(a)?a.join(" "):a;e.watch(r,function(c,u){o&&typeof c=="string"&&c!==u&&c!==o.getContent({format:t.outputFormat})&&o.setContent(c)}),o.on(l||"change input undo redo",function(){n.emit("update:modelValue",o.getContent({format:t.outputFormat}))})},it=function(t,n,o,r,a,l){r.setContent(l()),o.attrs["onUpdate:modelValue"]&&at(n,o,r,a),rt(t,o.attrs,r)},_e=0,Te=function(t){var n=Date.now(),o=Math.floor(Math.random()*1e9);return _e++,t+"_"+o+_e+String(n)},st=function(t){return t!==null&&t.tagName.toLowerCase()==="textarea"},we=function(t){return typeof t>"u"||t===""?[]:Array.isArray(t)?t:t.split(" ")},ut=function(t,n){return we(t).concat(we(n))},ct=function(t){return t==null},Be=function(){return{listeners:[],scriptId:Te("tiny-script"),scriptLoaded:!1}},dt=function(){var t=Be(),n=function(a,l,c,u){var i=l.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=a,i.src=c;var f=function(){i.removeEventListener("load",f),u()};i.addEventListener("load",f),l.head&&l.head.appendChild(i)},o=function(a,l,c){t.scriptLoaded?c():(t.listeners.push(c),a.getElementById(t.scriptId)||n(t.scriptId,a,l,function(){t.listeners.forEach(function(u){return u()}),t.scriptLoaded=!0}))},r=function(){t=Be()};return{load:o,reinitialize:r}},ft=dt(),mt=function(){return typeof window<"u"?window:global},J=function(){var t=mt();return t&&t.tinymce?t.tinymce:null},vt={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(t){return t==="html"||t==="text"}}},U=function(){return U=Object.assign||function(t){for(var n,o=1,r=arguments.length;o<r;o++){n=arguments[o];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},U.apply(this,arguments)},pt=function(t,n,o,r){return t(r||"div",{id:n,ref:o})},ht=function(t,n,o){return t("textarea",{id:n,visibility:"hidden",ref:o})},me={selector:void 0,target:void 0},gt=e.defineComponent({props:vt,setup:function(t,n){var o=t.init?U(U({},t.init),me):U({},me),r=e.toRefs(t),a=r.disabled,l=r.modelValue,c=r.tagName,u=e.ref(null),i=null,f=t.id||Te("tiny-vue"),m=t.init&&t.init.inline||t.inline,b=!!n.attrs["onUpdate:modelValue"],g=!0,C=t.initialValue?t.initialValue:"",y="",_=function(k){return b?function(){return l!=null&&l.value?l.value:""}:function(){return k?C:y}},w=function(){var k=_(g),B=U(U({},o),{readonly:t.disabled,target:u.value,plugins:ut(o.plugins,t.plugins),toolbar:t.toolbar||o.toolbar,inline:m,license_key:t.licenseKey,setup:function(V){i=V,V.on("init",function(M){return it(M,t,n,V,l,k)}),typeof o.setup=="function"&&o.setup(V)}});st(u.value)&&(u.value.style.visibility=""),J().init(B),g=!1};e.watch(a,function(k){var B;i!==null&&(typeof((B=i.mode)===null||B===void 0?void 0:B.set)=="function"?i.mode.set(k?"readonly":"design"):i.setMode(k?"readonly":"design"))}),e.watch(c,function(k){var B;b||(y=i.getContent()),(B=J())===null||B===void 0||B.remove(i),e.nextTick(function(){return w()})}),e.onMounted(function(){if(J()!==null)w();else if(u.value&&u.value.ownerDocument){var k=t.cloudChannel?t.cloudChannel:"7",B=t.apiKey?t.apiKey:"no-api-key",V=ct(t.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(B,"/tinymce/").concat(k,"/tinymce.min.js"):t.tinymceScriptSrc;ft.load(u.value.ownerDocument,V,w)}}),e.onBeforeUnmount(function(){J()!==null&&J().remove(i)}),m||(e.onActivated(function(){g||w()}),e.onDeactivated(function(){var k;b||(y=i.getContent()),(k=J())===null||k===void 0||k.remove(i)}));var x=function(k){var B;y=i.getContent(),(B=J())===null||B===void 0||B.remove(i),o=U(U(U({},o),k),me),e.nextTick(function(){return w()})};return n.expose({rerender:x,getEditor:function(){return i}}),function(){return m?pt(e.h,f,u,t.tagName):ht(e.h,f,u)}}});const Ct="74ca372jx03ojgry4czoi2g59d4pruuozmudnvfqwzs742yz",bt={__name:"GeneralComponentEditing",props:e.mergeModels({is_component:{type:Boolean,default:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const n=e.useModel(t,"modelValue"),o={class:"text-field",style:"text-field",id:"text-field",title:"text-field",href:"text-field",target:{type:"select",enum:["_blank","_self","_parent","_top"]},color:{type:"select",enum:["red","green","blue","yellow","purple","pink","orange","brown","grey","black","white"]}};function r(){const a=prompt("Enter new prop name:");n.value.props===void 0&&(n.value.props={}),a&&(n.value.props[a]="")}return(a,l)=>{const c=e.resolveComponent("v-text-field"),u=e.resolveComponent("v-btn"),i=e.resolveComponent("v-select"),f=e.resolveComponent("v-icon"),m=e.resolveComponent("v-textarea"),b=e.resolveComponent("v-btn-group");return e.openBlock(),e.createElementBlock(e.Fragment,null,[t.is_component?(e.openBlock(),e.createBlock(c,{key:0,modelValue:n.value.component,"onUpdate:modelValue":l[0]||(l[0]=g=>n.value.component=g),label:"Component",type:"text"},null,8,["modelValue"])):(e.openBlock(),e.createBlock(c,{key:1,modelValue:n.value.name,"onUpdate:modelValue":l[1]||(l[1]=g=>n.value.name=g),label:"Name",type:"text"},null,8,["modelValue"])),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value.props,(g,C)=>{var y;return e.openBlock(),e.createElementBlock(e.Fragment,{key:C},[typeof o[C]=="string"&&o[C]!=="htmlContent"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent("v-"+o[C]),{key:0,modelValue:n.value.props[C],"onUpdate:modelValue":_=>n.value.props[C]=_,label:C},{append:e.withCtx(()=>[e.createVNode(u,{variant:"text",color:"red",onClick:()=>{delete n.value.props[C]},icon:"fa-solid fa-xmark"},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"])):((y=o[C])==null?void 0:y.type)==="select"?(e.openBlock(),e.createBlock(i,{key:1,modelValue:n.value.props[C],"onUpdate:modelValue":_=>n.value.props[C]=_,label:C,items:o[C].enum},{append:e.withCtx(()=>[e.createVNode(u,{variant:"text",color:"red",onClick:()=>{delete n.value.props[C]},icon:"fa-solid fa-xmark"},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","label","items"])):(e.openBlock(),e.createBlock(c,{key:2,modelValue:n.value.props[C],"onUpdate:modelValue":_=>n.value.props[C]=_,label:C,type:"text"},{append:e.withCtx(()=>[e.createVNode(u,{variant:"text",color:"red",onClick:()=>{delete n.value.props[C]},icon:"fa-solid fa-xmark"},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"]))],64)}),128)),n.value.hasOwnProperty("htmlContent")?(e.openBlock(),e.createBlock(e.unref(gt),{key:2,modelValue:n.value.htmlContent,"onUpdate:modelValue":l[2]||(l[2]=g=>n.value.htmlContent=g),init:e.unref(tt),"api-key":Ct},null,8,["modelValue","init"])):e.createCommentVNode("",!0),n.value.hasOwnProperty("textContent")?(e.openBlock(),e.createBlock(m,{key:3,modelValue:n.value.textContent,"onUpdate:modelValue":l[3]||(l[3]=g=>n.value.textContent=g),label:"Text Content",type:"text"},{prepend:e.withCtx(()=>[e.createVNode(f,null,{default:e.withCtx(()=>l[8]||(l[8]=[e.createTextVNode("fa-solid fa-text-width")])),_:1,__:[8]})]),_:1},8,["modelValue"])):e.createCommentVNode("",!0),e.createVNode(b,{variant:"text"},{default:e.withCtx(()=>[n.value.hasOwnProperty("htmlContent")?(e.openBlock(),e.createBlock(u,{key:0,color:"red",onClick:l[4]||(l[4]=()=>{delete n.value.htmlContent})},{default:e.withCtx(()=>l[9]||(l[9]=[e.createTextVNode("Delete htmlContent")])),_:1,__:[9]})):(e.openBlock(),e.createBlock(u,{key:1,color:"green",onClick:l[5]||(l[5]=()=>{n.value.htmlContent=""})},{default:e.withCtx(()=>l[10]||(l[10]=[e.createTextVNode("Add htmlContent")])),_:1,__:[10]})),n.value.hasOwnProperty("textContent")?(e.openBlock(),e.createBlock(u,{key:2,color:"red",onClick:l[6]||(l[6]=()=>{delete n.value.textContent})},{default:e.withCtx(()=>l[11]||(l[11]=[e.createTextVNode("Delete textContent")])),_:1,__:[11]})):(e.openBlock(),e.createBlock(u,{key:3,color:"green",onClick:l[7]||(l[7]=()=>{n.value.textContent=""})},{default:e.withCtx(()=>l[12]||(l[12]=[e.createTextVNode("Add textContent")])),_:1,__:[12]})),e.createVNode(u,{color:"green",onClick:r},{default:e.withCtx(()=>l[13]||(l[13]=[e.createTextVNode("Add New Prop")])),_:1,__:[13]})]),_:1})],64)}}},yt=Z(bt,[["__scopeId","data-v-aa3cbf01"]]),kt={__name:"ComponentElementEdit",props:e.mergeModels({data:{type:Object,required:!0}},{dialog:{},dialogModifiers:{}}),emits:e.mergeModels(["dataSaved"],["update:dialog"]),setup(t,{emit:n}){const o=t,r=e.ref(o.data),a=e.useModel(t,"dialog"),l=e.ref("");e.watch(a,u=>{var i;u&&o.data.hasOwnProperty("component")?(l.value=(i=o.data)==null?void 0:i.component,r.value=JSON.parse(JSON.stringify(o.data))):u&&o.data.hasOwnProperty("name")&&(l.value="slot",r.value=JSON.parse(JSON.stringify(o.data)))});const c=()=>{a.value=!1,l.value="",r.value={}};return(u,i)=>{const f=e.resolveComponent("v-card-text"),m=e.resolveComponent("v-spacer"),b=e.resolveComponent("v-btn"),g=e.resolveComponent("v-card-actions"),C=e.resolveComponent("v-icon"),y=e.resolveComponent("v-card"),_=e.resolveComponent("v-dialog");return e.openBlock(),e.createBlock(_,{modelValue:a.value,"onUpdate:modelValue":i[2]||(i[2]=w=>a.value=w),"max-width":"800px","retain-focus":!1},{default:e.withCtx(()=>[e.createVNode(y,{title:"Editing: "+l.value},{append:e.withCtx(()=>[e.createVNode(b,{class:"close-btn",variant:"text",onClick:c},{default:e.withCtx(()=>[e.createVNode(C,null,{default:e.withCtx(()=>i[5]||(i[5]=[e.createTextVNode("fa-solid fa-xmark")])),_:1,__:[5]})]),_:1})]),default:e.withCtx(()=>[l.value!=""?(e.openBlock(),e.createBlock(f,{key:0},{default:e.withCtx(()=>[e.createVNode(yt,{modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=w=>r.value=w),is_component:l.value!="slot"},null,8,["modelValue","is_component"])]),_:1})):e.createCommentVNode("",!0),e.createVNode(g,null,{default:e.withCtx(()=>[e.createVNode(m),e.createVNode(b,{color:"red",onClick:c},{default:e.withCtx(()=>i[3]||(i[3]=[e.createTextVNode("Cancel")])),_:1,__:[3]}),e.createVNode(b,{color:"green",onClick:i[1]||(i[1]=w=>u.$emit("dataSaved",r.value))},{default:e.withCtx(()=>i[4]||(i[4]=[e.createTextVNode("Save")])),_:1,__:[4]})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}},xt=Z(kt,[["__scopeId","data-v-18173f8b"]]),Ae=[{title:"Card",component:"v-card",props:{}},{title:"Card Title",component:"v-card-title",props:{}},{title:"Card Text",component:"v-card-text",props:{}},{title:"Card Actions",component:"v-card-actions",props:{}},{title:"Div",component:"div",props:{}},{title:"Row",component:"v-row",props:{}},{title:"Col",component:"v-col",props:{}},{title:"H1",component:"h1",props:{}},{title:"H2",component:"h2",props:{}},{title:"H3",component:"h3",props:{}},{title:"H4",component:"h4",props:{}},{title:"H5",component:"h5",props:{}},{title:"Paragraph",component:"p",props:{}},{title:"Span",component:"span",props:{}},{title:"List",component:"v-list",props:{}},{title:"List Item",component:"v-list-item",props:{}},{title:"IFrame",component:"iframe",props:{}}];function He(t){const n=e.inject("componentClipboard");return{removeElement:l=>{const c=[...t.value],u=l.slice(0,-1).reduce((i,f)=>i[f],c);if(u){const i=l[l.length-1];u.splice(i,1)}t.value=c},pasteElement:(l,c)=>{if(!n.hasContent())return;const u=[...t.value],i=JSON.parse(JSON.stringify(n.element));switch(c){case"prepend":u.splice(l[l.length-1],0,i);break;case"append":u.splice(l[l.length-1]+1,0,i);break;case"child":const f=l.reduce((m,b)=>m[b],u);f.children||(f.children=[]),f.children.push(i);break}t.value=u,n.isCut&&n.clear()},insertElement:(l,c)=>{const u=[...t.value],i=l.reduce((f,m)=>f[m],u);i.children||(i.children=[]),i.children.push(c),t.value=u}}}function Le(t,n){return{label:"Insert",children:Ae.map(o=>({label:o.title,onClick:()=>t(n,{...o})}))}}const _t={class:"tree-node"},wt={key:1,class:"node-content"},Bt={key:0,class:"children"},St={key:0},Et={key:1,class:"slots"},Vt=["onContextmenu"],Mt={__name:"TreeNode",props:{node:{type:[Object,Array],required:!0},label:{type:String,default:""}},emits:["openEdit"],setup(t,{expose:n,emit:o}){const r=t,a=o,l=e.ref(!0);function c(){l.value=!l.value}n({isExpanded:l,treeNodes:e.ref([])});function u(w,x){w.preventDefault(),a("openEdit",{event:w,element:x,path:[]})}function i(w,x){const k=["children",x,...w.path];a("openEdit",{event:w.event,element:w.element,path:k})}function f(w,x,k){w.preventDefault(),a("openEdit",{event:w,element:x,path:["slots",k]})}const m=e.computed(()=>Object.prototype.toString.call(r.node)==="[object Object]"),b=e.computed(()=>m.value&&r.node.component?r.node.component:r.label),g=e.computed(()=>{if(m.value){if(r.node.textContent)return r.node.textContent;if(r.node.htmlContent)return"[HTML content]"}return""}),C=e.computed(()=>m.value&&Array.isArray(r.node.children)&&r.node.children.length>0),y=e.computed(()=>m.value&&Array.isArray(r.node.slots)&&r.node.slots.length>0),_=e.computed(()=>C.value||y.value);return(w,x)=>(e.openBlock(),e.createElementBlock("div",_t,[e.createElementVNode("div",{class:"node-label",onContextmenu:x[0]||(x[0]=e.withModifiers(k=>u(k,r.node),["stop"]))},[_.value?(e.openBlock(),e.createElementBlock("span",{key:0,class:"expand-icon",onClick:c},[e.createElementVNode("i",{class:e.normalizeClass(l.value?"fa-solid fa-chevron-down":"fa-solid fa-chevron-right")},null,2)])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(b.value)+" ",1),g.value?(e.openBlock(),e.createElementBlock("span",wt," - "+e.toDisplayString(g.value),1)):e.createCommentVNode("",!0)],32),_.value&&l.value?(e.openBlock(),e.createElementBlock("div",Bt,[C.value?(e.openBlock(),e.createElementBlock("div",St,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.node.children,(k,B)=>(e.openBlock(),e.createBlock(ze,{key:"child-"+B,node:k,label:k.component||"["+B+"]",onOpenEdit:V=>i(V,B),ref_for:!0,ref:"treeNodes"},null,8,["node","label","onOpenEdit"]))),128))])):e.createCommentVNode("",!0),y.value?(e.openBlock(),e.createElementBlock("div",Et,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.node.slots,(k,B)=>(e.openBlock(),e.createElementBlock("div",{key:"slot-"+B,class:"slot-label",onContextmenu:e.withModifiers(V=>f(V,k,B),["stop"])}," Slot: "+e.toDisplayString(k.name),41,Vt))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]))}},ze=Z(Mt,[["__scopeId","data-v-aaf0fd33"]]);let q=null;function Nt(){return q!==null}function Ot(t){q&&je(),q=t}function Se(t){t===q&&(q=null)}function je(){q&&(q.closeMenu(),q=null)}const $={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultZoom:1,defaultAdjustPadding:{x:0,y:10}};function ne(t,n){let o=t.offsetTop;return t.offsetParent!=null&&t.offsetParent!=n&&(o-=t.offsetParent.scrollTop,o+=ne(t.offsetParent,n)),o}function oe(t,n){let o=t.offsetLeft;return t.offsetParent!=null&&t.offsetParent!=n&&(o-=t.offsetParent.scrollLeft,o+=oe(t.offsetParent,n)),o}function Pt(t,n,o,r){return{x:oe(t,r)+n,y:ne(t,r)+o}}const ve="mx-menu-default-container",It="mx-menu-container-";let Rt=0;function De(t){const{getContainer:n,zIndex:o}=t;if(n){const a=typeof n=="function"?n():n;if(a){let l=a.getAttribute("id");return l||(l=It+Rt++,a.setAttribute("id",l)),{eleId:l,container:a,isNew:!1}}}let r=document.getElementById(ve);return r||(r=document.createElement("div"),r.setAttribute("id",ve),r.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(r)),r.style.zIndex=(o==null?void 0:o.toString())||$.defaultZindex.toString(),{eleId:ve,container:r,isNew:!0}}function Ee(t){return typeof t=="number"?`${t}px`:t}const F=e.defineComponent({props:{vnode:{type:null},data:{type:null,default:null}},setup(t){const{vnode:n,data:o}=e.toRefs(t);return()=>typeof n.value=="function"?n.value(o.value):n.value}});function Wt(t,n){const o={...t};return delete o[n],o}var Tt=Object.defineProperty,At=(t,n,o)=>n in t?Tt(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,Ve=(t,n,o)=>At(t,typeof n!="symbol"?n+"":n,o);class Me{constructor(n,o){Ve(this,"x",0),Ve(this,"y",0),this.x=n||0,this.y=o||0}set(n,o){this.x=n,this.y=o}substract(n){this.x-=n.x,this.y-=n.y}}function Ne(t){const{onDown:n,onMove:o,onUp:r}=t,a=new Me,l=new Me;let c;function u(f){f.stopPropagation(),l.set(f.x,f.y),l.substract(a),o(a,l,f,c)}function i(f){r(f,c),a.set(0,0),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",i)}return(f,m)=>n(f,m)?(c=m,a.set(f.x,f.y),document.addEventListener("mousemove",u),document.addEventListener("mouseup",i),f.stopPropagation(),!0):!1}function Ht(t,n){let o=0;return{start(){o>0&&clearInterval(o),o=setInterval(()=>{o=0,n()},t)},stop(){o>0&&(clearInterval(o),o=0)}}}const te=[],Oe=Ht(100,()=>{for(const t of te)t()});function Lt(t,n,o,r){let a=0,l=0;function c(){t.value&&(n&&a!==t.value.offsetWidth&&n(t.value.offsetWidth),o&&l!==t.value.offsetHeight&&o(t.value.offsetHeight),a=t.value.offsetWidth,l=t.value.offsetHeight)}return{startResizeChecker(){Oe.start(),te.push(c)},stopResizeChecker(){const u=te.indexOf(c);u>=0&&te.splice(u,1),te.length===0&&Oe.stop()}}}const Pe=140,zt=70,jt=e.defineComponent({__name:"ScrollRect",props:{scroll:{type:String,default:"both"},scrollBarAlwaysShow:{type:Boolean,default:!1},scrollBarBackgroundClickable:{type:Boolean,default:!1},height:{type:Number,default:void 0},width:{type:Number,default:void 0},maxHeight:{type:Number,default:void 0},maxWidth:{type:Number,default:void 0},containerClass:{type:String,default:""},containerStyle:{type:null}},emits:["scroll","resized"],setup(t,{expose:n,emit:o}){const r=t,a=o,l=e.ref(),c=e.ref(),u=e.ref(),i=e.ref(),f=e.ref(),m=e.ref(),b=e.ref(!1),g=e.computed(()=>r.scroll==="horizontal"||r.scroll==="both"),C=e.computed(()=>r.scroll==="vertical"||r.scroll==="both"),y=e.reactive({show:!1,size:0,sizeRaw:0,pos:0}),_=e.reactive({show:!1,size:0,sizeRaw:0,pos:0});let w=0,x=0,k=0,B=0,V=null;const M={attributes:!0,childList:!0};function s(){if(l.value){if(y.show){const p=l.value.offsetWidth/l.value.scrollWidth;y.sizeRaw=p*l.value.offsetWidth,y.size=p*100,y.pos=l.value.scrollLeft/(l.value.scrollWidth-l.value.offsetWidth)*(100-y.size),p>=1&&(y.show=!1)}if(_.show){const p=l.value.offsetHeight/l.value.scrollHeight;_.sizeRaw=p*l.value.offsetHeight,_.size=p*100,_.pos=l.value.scrollTop/(l.value.scrollHeight-l.value.offsetHeight)*(100-_.size),p>=1&&(_.show=!1)}a("scroll",l.value.scrollLeft,l.value.scrollTop)}}function v(p=!1){if(!l.value)return;let R=g.value,T=C.value;const ue=R&&(w!==l.value.scrollWidth||k!==l.value.offsetWidth),ce=C&&(x!==l.value.scrollHeight||B!==l.value.offsetHeight);if(!p&&!ue&&!ce)return;const X=window.getComputedStyle(l.value);(X.overflow==="hidden"||X.overflowX==="hidden")&&(R=!1),(X.overflow==="hidden"||X.overflowY==="hidden")&&(T=!1),y.show=R,_.show=T,s(),k=l.value.offsetWidth,B=l.value.offsetHeight,w=l.value.scrollWidth,x=l.value.scrollHeight,a("resized",w,x)}function S(p){var R;r.scroll=="horizontal"&&(p.deltaMode==0&&((R=l.value)==null||R.scrollTo({left:l.value.scrollLeft+(p.deltaY>0?Pe:-140),behavior:"smooth"})),p.preventDefault(),p.stopPropagation())}function P(p){var R;p.deltaMode==0&&((R=l.value)==null||R.scrollTo({left:l.value.scrollLeft+(p.deltaY>0?Pe:-140),behavior:"smooth"}),p.preventDefault(),p.stopPropagation())}function A(p){var R;p.deltaMode==0&&((R=l.value)==null||R.scrollTo({top:l.value.scrollTop+(p.deltaY>0?zt:-70),behavior:"smooth"}),p.preventDefault(),p.stopPropagation())}let z=0,H=0,N=0,W=0;const L=Ne({onDown(p){return!u.value||!f.value?!1:(z=p.offsetX,H=p.x-p.offsetX-f.value.offsetLeft,p.preventDefault(),b.value=!0,!0)},onMove(p,R,T){l.value&&u.value&&(h(T.x-z-H),T.preventDefault(),T.stopPropagation())},onUp(){b.value=!1}}),j=Ne({onDown(p){return!i.value||!m.value?!1:(N=p.offsetY,W=p.y-p.offsetY-m.value.offsetTop,p.preventDefault(),b.value=!0,!0)},onMove(p,R,T){l.value&&i.value&&(E(T.y-N-W),T.preventDefault(),T.stopPropagation())},onUp(){b.value=!1}});function O(p){l.value&&(l.value.scrollLeft=p/100*(l.value.scrollWidth-l.value.offsetWidth))}function K(p){l.value&&(l.value.scrollLeft=p/100*(l.value.scrollHeight-l.value.offsetHeight))}function h(p){l.value&&(l.value.scrollLeft=p/(l.value.offsetWidth-y.sizeRaw)*(l.value.scrollWidth-l.value.offsetWidth))}function E(p){l.value&&(l.value.scrollTop=p/(l.value.offsetHeight-_.sizeRaw)*(l.value.scrollHeight-l.value.offsetHeight))}function I(p){r.scrollBarBackgroundClickable&&h(p.offsetX-y.sizeRaw/2)}function d(p){r.scrollBarBackgroundClickable&&E(p.offsetY-_.sizeRaw/2)}const{startResizeChecker:G,stopResizeChecker:D}=Lt(l,()=>v(),()=>v());return e.onMounted(()=>{e.nextTick(()=>{setTimeout(()=>v(!0),200),v(!0),G(),V=new MutationObserver(()=>v()),V.observe(l.value,M)})}),e.onBeforeUnmount(()=>{D(),V&&(V.disconnect(),V=null)}),n({refreshScrollState(){v(!0)},getScrollContainer(){return l.value},scrollTo(p,R){var T;(T=l.value)==null||T.scrollTo(p,R)},scrollToTop(){var p;(p=l.value)==null||p.scrollTo(0,0)},scrollToBottom(){var p;(p=l.value)==null||p.scrollTo(l.value.scrollWidth,l.value.scrollHeight)}}),(p,R)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"scrollrect",ref:c,class:e.normalizeClass(["vue-scroll-rect",t.scrollBarAlwaysShow?"always-show-scrollbar":"",t.scrollBarBackgroundClickable?"background-clickable":"",b.value?"dragging":""]),style:e.normalizeStyle({width:t.width?`${t.width}px`:void 0,height:t.height?`${t.height}px`:void 0}),onWheel:S},[e.createElementVNode("div",{ref_key:"container",ref:l,class:e.normalizeClass(["scroll-content",t.scroll,t.containerClass]),style:e.normalizeStyle({maxWidth:t.maxWidth?`${t.maxWidth}px`:void 0,maxHeight:t.maxHeight?`${t.maxHeight}px`:void 0,...t.containerStyle}),onScroll:s},[e.renderSlot(p.$slots,"default")],38),y.show?e.renderSlot(p.$slots,"scrollBarX",{key:0,scrollBarValue:y,onScroll:O},()=>[e.createElementVNode("div",{ref_key:"scrollBarRefX",ref:u,class:"scrollbar horizontal",onClick:I,onWheel:P},[e.createElementVNode("div",{class:"thumb",ref_key:"scrollBarThumbRefX",ref:f,style:e.normalizeStyle({left:`${y.pos}%`,width:`${y.size}%`}),onMousedown:R[0]||(R[0]=(...T)=>e.unref(L)&&e.unref(L)(...T)),onWheel:P},null,36)],544)]):e.createCommentVNode("",!0),_.show?e.renderSlot(p.$slots,"scrollBarY",{key:1,scrollBarValue:_,onScroll:K},()=>[_.show?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"scrollBarRefY",ref:i,class:"scrollbar vertical",onClick:d,onWheel:A},[e.createElementVNode("div",{class:"thumb",ref_key:"scrollBarThumbRefY",ref:m,style:e.normalizeStyle({top:`${_.pos}%`,height:`${_.size}%`}),onMousedown:R[1]||(R[1]=(...T)=>e.unref(j)&&e.unref(j)(...T)),onWheel:A},null,36)],544)):e.createCommentVNode("",!0)]):e.createCommentVNode("",!0)],38))}}),ge=(t,n)=>{const o=t.__vccOpts||t;for(const[r,a]of n)o[r]=a;return o},Dt={},$t={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},Ft=e.createElementVNode("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1),Ut=[Ft];function Kt(t,n){return e.openBlock(),e.createElementBlock("svg",$t,Ut)}const Gt=ge(Dt,[["render",Kt]]),qt={},Jt={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},Xt=e.createElementVNode("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1),Yt=[Xt];function Zt(t,n){return e.openBlock(),e.createElementBlock("svg",Jt,Yt)}const Qt=ge(qt,[["render",Zt]]),en={class:"mx-item-row"},tn=["xlink:href"],nn={key:1,class:"label"},on={class:"mx-item-row"},ln={class:"mx-shortcut"},Ce=e.defineComponent({__name:"ContextMenuItem",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup(t,{expose:n,emit:o}){const r=t,a=o,{clickHandler:l,clickClose:c,clickableWhenHasChildren:u,disabled:i,hidden:f,label:m,icon:b,iconFontClass:g,showRightArrow:C,shortcut:y,hasChildren:_}=e.toRefs(r),w=e.ref(!1),x=e.ref(!1),k=e.ref(),B=e.inject("globalOptions"),V=e.inject("globalHasSlot"),M=e.inject("globalRenderSlot"),s=e.inject("globalCloseMenu"),v=e.inject("menuContext"),S={getSubMenuInstance:()=>{},showSubMenu:()=>w.value?(v.markActiveMenuItem(S,!0),!0):_.value?(A(),!0):!1,hideSubMenu:()=>{v.closeOtherSubMenu()},isDisabledOrHidden:()=>i.value||f.value,getElement:()=>k.value,focus:()=>x.value=!0,blur:()=>x.value=!1,click:P};e.provide("menuItemInstance",S),e.onMounted(()=>{v.isMenuItemDataCollectedFlag()?e.nextTick(()=>{let N=0;const W=v.getElement();if(W){let L=0;for(let j=0;j<W.children.length;j++){const O=W.children[j];if(O.getAttribute("data-type")==="ContextMenuItem"){if(O===k.value){N=L;break}L++}}}v.addChildMenuItem(S,N)}):v.addChildMenuItem(S)}),e.onBeforeUnmount(()=>{v.removeChildMenuItem(S)});function P(N){if(!i.value){if(N){const W=N.target;if(W.classList.contains("mx-context-no-clickable")||B.value.ignoreClickClassName&&W.classList.contains(B.value.ignoreClickClassName))return;if(B.value.clickCloseClassName&&W.classList.contains(B.value.clickCloseClassName)){N.stopPropagation(),s(r.rawMenuItem);return}}_.value?u.value?(typeof l.value=="function"&&l.value(N),a("click",N)):w.value||A():(typeof l.value=="function"&&l.value(N),a("click",N),c.value&&s(r.rawMenuItem))}}function A(N){x.value=!1,v.checkCloseOtherSubMenuTimeOut()||v.closeOtherSubMenu(),i.value||(v.markActiveMenuItem(S),_.value&&(N||v.markThisOpenedByKeyBoard(),v.addOpenedSubMenu(z),w.value=!0,e.nextTick(()=>a("subMenuOpen",S))))}function z(){x.value=!1,w.value=!1,a("subMenuClose",S)}function H(){return{disabled:i.value,label:m.value,icon:b.value,iconFontClass:g.value,showRightArrow:C.value,clickClose:c.value,clickableWhenHasChildren:u.value,shortcut:y.value,theme:B.value.theme,isOpen:w,hasChildren:_,onClick:P,onMouseEnter:A,closeMenu:s}}return n(S),(N,W)=>e.unref(f)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-context-menu-item-wrapper",ref_key:"menuItemRef",ref:k,"data-type":"ContextMenuItem"},[e.unref(V)("itemRender")?(e.openBlock(),e.createBlock(e.unref(F),{key:0,vnode:()=>e.unref(M)("itemRender",H())},null,8,["vnode"])):t.customRender?(e.openBlock(),e.createBlock(e.unref(F),{key:1,vnode:t.customRender,data:H()},null,8,["vnode","data"])):(e.openBlock(),e.createElementBlock("div",{key:2,class:e.normalizeClass(["mx-context-menu-item",e.unref(i)?"disabled":"",x.value?"keyboard-focus":"",t.customClass?" "+t.customClass:"",w.value?"open":""]),onClick:P,onMouseenter:A},[e.renderSlot(N.$slots,"default",{},()=>[e.createElementVNode("div",en,[e.createElementVNode("div",{class:e.normalizeClass(["mx-icon-placeholder",t.preserveIconWidth?"preserve-width":""])},[e.renderSlot(N.$slots,"icon",{},()=>[e.unref(V)("itemIconRender")?(e.openBlock(),e.createBlock(e.unref(F),{key:0,vnode:()=>e.unref(M)("itemIconRender",H())},null,8,["vnode"])):typeof t.svgIcon=="string"&&t.svgIcon?(e.openBlock(),e.createElementBlock("svg",e.mergeProps({key:1,class:"icon svg"},t.svgProps),[e.createElementVNode("use",{"xlink:href":t.svgIcon},null,8,tn)],16)):typeof e.unref(b)!="string"?(e.openBlock(),e.createBlock(e.unref(F),{key:2,vnode:e.unref(b),data:e.unref(b)},null,8,["vnode","data"])):typeof e.unref(b)=="string"&&e.unref(b)!==""?(e.openBlock(),e.createElementBlock("i",{key:3,class:e.normalizeClass(e.unref(b)+" icon "+e.unref(g)+" "+e.unref(B).iconFontClass)},null,2)):e.createCommentVNode("",!0)]),t.checked?e.renderSlot(N.$slots,"check",{key:0},()=>[e.unref(V)("itemCheckRender")?(e.openBlock(),e.createBlock(e.unref(F),{key:0,vnode:()=>e.unref(M)("itemCheckRender",H())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createVNode(Gt)]):e.createCommentVNode("",!0)],2),e.renderSlot(N.$slots,"label",{},()=>[e.unref(V)("itemLabelRender")?(e.openBlock(),e.createBlock(e.unref(F),{key:0,vnode:()=>e.unref(M)("itemLabelRender",H())},null,8,["vnode"])):typeof e.unref(m)=="string"?(e.openBlock(),e.createElementBlock("span",nn,e.toDisplayString(e.unref(m)),1)):(e.openBlock(),e.createBlock(e.unref(F),{key:2,vnode:e.unref(m),data:e.unref(m)},null,8,["vnode","data"]))])]),e.createElementVNode("div",on,[e.unref(y)||N.$slots.shortcut?e.renderSlot(N.$slots,"shortcut",{key:0},()=>[e.unref(V)("itemShortcutRender")?(e.openBlock(),e.createBlock(e.unref(F),{key:0,vnode:()=>e.unref(M)("itemShortcutRender",H())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createElementVNode("span",ln,e.toDisplayString(e.unref(y)),1)]):e.createCommentVNode("",!0),e.unref(C)?e.renderSlot(N.$slots,"rightArrow",{key:1},()=>[e.unref(V)("itemRightArrowRender")?(e.openBlock(),e.createBlock(e.unref(F),{key:0,vnode:()=>e.unref(M)("itemRightArrowRender",H())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createVNode(Qt)]):e.createCommentVNode("",!0)])])],34)),e.unref(B).menuTransitionProps?(e.openBlock(),e.createBlock(e.Transition,e.normalizeProps(e.mergeProps({key:3},e.unref(B).menuTransitionProps)),{default:e.withCtx(()=>[w.value?e.renderSlot(N.$slots,"submenu",{key:0,context:S}):e.createCommentVNode("",!0)]),_:3},16)):w.value?e.renderSlot(N.$slots,"submenu",{key:4,context:S}):e.createCommentVNode("",!0)],512))}}),rn=e.defineComponent({name:"ContextMenuSperator",components:{VNodeRender:F},setup(){const t=e.inject("globalHasSlot"),n=e.inject("globalRenderSlot");return{globalHasSlot:t,globalRenderSlot:n}}}),an={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function sn(t,n,o,r,a,l){const c=e.resolveComponent("VNodeRender");return t.globalHasSlot("separatorRender")?(e.openBlock(),e.createBlock(c,{key:0,vnode:()=>t.globalRenderSlot("separatorRender",{})},null,8,["vnode"])):(e.openBlock(),e.createElementBlock("div",an))}const le=ge(rn,[["render",sn]]),re=e.defineComponent({__name:"ContextSubMenu",props:{items:{type:Object,default:null},maxHeight:{type:Number,default:0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"},parentMenuItemContext:{type:Object,default:null}},setup(t,{expose:n}){const o=t,r=e.ref(!1),a=e.inject("globalGetMenuHostId",""),l=e.inject("menuContext"),c=e.inject("globalOptions");e.inject("globalHasSlot"),e.inject("globalRenderSlot");const{zIndex:u,getParentWidth:i,getParentHeight:f,getZoom:m}=l,{adjustPosition:b}=e.toRefs(o),g=e.ref(),C=e.ref(),y=e.ref(),_=[],w=e.inject("globalSetCurrentSubMenu"),x=[];let k=null,B=0;function V(){k&&k.blur()}function M(h,E){if(h){for(let I=E!==void 0?E:0;I<x.length;I++)if(!x[I].isDisabledOrHidden()){s(I);break}}else for(let I=E!==void 0?E:x.length-1;I>=0;I--)if(!x[I].isDisabledOrHidden()){s(I);break}}function s(h){var E;if(k&&V(),h!==void 0&&(k=x[Math.max(0,Math.min(h,x.length-1))]),!k)return;k.focus();const I=k.getElement();I&&((E=g.value)==null||E.scrollTo(0,Math.min(Math.max(-W.value,-I.offsetTop-I.offsetHeight+L.value),0)))}function v(){w(S)}const S={isTopLevel:()=>l.getParentContext()===null,closeSelfAndActiveParent:()=>{const h=z.getParentContext();if(h){h.closeOtherSubMenu();const E=h.getSubMenuInstanceContext();if(E)return E.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:()=>{var h;return(h=z.getParentContext())==null?void 0:h.closeOtherSubMenu()},moveCurrentItemFirst:()=>M(!0),moveCurrentItemLast:()=>M(!1),moveCurrentItemDown:()=>M(!0,k?x.indexOf(k)+1:0),moveCurrentItemUp:()=>M(!1,k?x.indexOf(k)-1:0),focusCurrentItem:()=>s(),openCurrentItemSubMenu:()=>k?k==null?void 0:k.showSubMenu():!1,triggerCurrentItemClick:h=>k==null?void 0:k.click(h)};let P=!1,A=!1;const z={zIndex:u+1,container:l.container,adjustPadding:c.value.adjustPadding||$.defaultAdjustPadding,getParentWidth:()=>{var h;return((h=y.value)==null?void 0:h.offsetWidth)||0},getParentHeight:()=>{var h;return((h=y.value)==null?void 0:h.offsetHeight)||0},getPositon:()=>[O.value.x,O.value.y],getZoom:()=>c.value.zoom||$.defaultZoom,addOpenedSubMenu(h){_.push(h)},closeOtherSubMenu(){_.forEach(h=>h()),_.splice(0,_.length),w(S)},checkCloseOtherSubMenuTimeOut(){return B?(clearTimeout(B),B=0,!0):!1},closeOtherSubMenuWithTimeOut(){B=setTimeout(()=>{B=0,this.closeOtherSubMenu()},200)},addChildMenuItem:(h,E)=>{E===void 0?x.push(h):x.splice(E,0,h)},removeChildMenuItem:h=>{x.splice(x.indexOf(h),1),h.getSubMenuInstance=()=>{}},markActiveMenuItem:(h,E=!1)=>{V(),k=h,E&&s()},markThisOpenedByKeyBoard:()=>{P=!0},isOpenedByKeyBoardFlag:()=>P?(P=!1,!0):!1,isMenuItemDataCollectedFlag:()=>A,getElement:()=>y.value||null,getParentContext:()=>l,getSubMenuInstanceContext:()=>S};e.provide("menuContext",z);const H={getChildItem:h=>x[h],getMenuDimensions:()=>C.value?{width:C.value.offsetWidth,height:C.value.offsetHeight}:{width:0,height:0},getSubmenuRoot:()=>C.value,getMenu:()=>y.value,getScrollValue:()=>{var h,E;return((E=(h=g.value)==null?void 0:h.getScrollContainer())==null?void 0:E.scrollTop)||0},setScrollValue:h=>{var E;return(E=g.value)==null?void 0:E.scrollTo(0,h)},getScrollHeight:()=>W.value,adjustPosition:()=>{K()},getMaxHeight:()=>L.value,getPosition:()=>O.value,setPosition:(h,E)=>{O.value.x=h,O.value.y=E}},N=e.inject("menuItemInstance",void 0);N&&(N.getSubMenuInstance=()=>H);const W=e.ref(0),L=e.ref(0),j=e.ref(!1),O=e.ref({x:0,y:0});function K(){e.nextTick(()=>{const h=y.value,E=C.value;if(h&&E&&g.value){const{container:I}=l,d=(i==null?void 0:i())??0,G=(f==null?void 0:f())??0,D=getComputedStyle(E),p=parseFloat(D.paddingLeft),R=parseFloat(D.paddingTop),T=G>0?R:0,ue=document.documentElement.scrollHeight/m(),ce=document.documentElement.scrollWidth/m(),X=Math.min(ce,I.offsetWidth),be=Math.min(ue,I.offsetHeight);let de=oe(h,I),fe=ne(h,I);o.direction.includes("l")?O.value.x-=h.offsetWidth+p:o.direction.includes("r")?O.value.x+=d+p:(O.value.x+=d/2,O.value.x-=(h.offsetWidth+p)/2),o.direction.includes("t")?O.value.y-=(h.offsetHeight+R*2)/m():o.direction.includes("b")?O.value.y-=R/m():O.value.y-=(h.offsetHeight+R)/2/m(),e.nextTick(()=>{var ye,ke;de=oe(h,I),fe=ne(h,I),W.value=Math.min(o.maxHeight||1e5,((ke=(ye=g.value)==null?void 0:ye.getScrollContainer())==null?void 0:ke.scrollHeight)||0);const Xe=de+h.offsetWidth-X,xe=fe+W.value+T*2-be;if(j.value=xe>0,b.value&&Xe>0){const Q=d+h.offsetWidth-p,ee=de;Q>ee?O.value.x-=ee:O.value.x-=Q}if(j.value){if(b.value){const Q=xe,ee=fe;Q>ee?O.value.y-=ee-T:O.value.y-=Q-T}L.value=be-(O.value.y+R)}else L.value=0})}h==null||h.focus({preventScroll:!0}),l.isOpenedByKeyBoardFlag()&&M(!0),A=!0})}return e.onMounted(()=>{var h;r.value=!0;const E=(h=o.parentMenuItemContext)==null?void 0:h.getElement();if(E){const I=oe(E,l.container),d=ne(E,l.container);O.value.x=I,O.value.y=d}else{const[I,d]=l.getPositon();O.value.x=I,O.value.y=d}w(S),K()}),e.onBeforeUnmount(()=>{r.value=!1,N&&(N.getSubMenuInstance=()=>{})}),n(H),(h,E)=>{const I=e.resolveComponent("ContextSubMenu",!0);return r.value?(e.openBlock(),e.createBlock(e.Teleport,{key:0,to:`#${e.unref(a)}`},[e.createElementVNode("div",e.mergeProps({ref_key:"submenuRoot",ref:C},h.$attrs,{class:["mx-context-menu",e.unref(c).customClass?e.unref(c).customClass:"",e.unref(c).theme??""],style:{maxWidth:t.maxWidth?e.unref(Ee)(t.maxWidth):`${e.unref($).defaultMaxWidth}px`,minWidth:t.minWidth?e.unref(Ee)(t.minWidth):`${e.unref($).defaultMinWidth}px`,zIndex:e.unref(u),left:`${O.value.x}px`,top:`${O.value.y}px`},"data-type":"ContextSubMenu",onClick:v}),[e.createVNode(e.unref(jt),{ref_key:"scrollRectRef",ref:g,scroll:"vertical",maxHeight:L.value,containerClass:"mx-context-menu-scroll"},{default:e.withCtx(()=>[e.createElementVNode("div",{class:e.normalizeClass(["mx-context-menu-items"]),ref_key:"menu",ref:y},[e.renderSlot(h.$slots,"default",{},()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.items,(d,G)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:G},[d.hidden!==!0&&d.divided==="up"?(e.openBlock(),e.createBlock(le,{key:0})):e.createCommentVNode("",!0),d.hidden!==!0&&d.divided==="self"?(e.openBlock(),e.createBlock(le,{key:1})):(e.openBlock(),e.createBlock(Ce,{key:2,clickHandler:d.onClick?D=>d.onClick(D):void 0,disabled:typeof d.disabled=="object"?d.disabled.value:d.disabled,hidden:typeof d.hidden=="object"?d.hidden.value:d.hidden,icon:d.icon,iconFontClass:d.iconFontClass,svgIcon:d.svgIcon,svgProps:d.svgProps,label:d.label,customRender:d.customRender,customClass:d.customClass,checked:typeof d.checked=="object"?d.checked.value:d.checked,shortcut:d.shortcut,clickClose:d.clickClose,clickableWhenHasChildren:d.clickableWhenHasChildren,preserveIconWidth:d.preserveIconWidth!==void 0?d.preserveIconWidth:e.unref(c).preserveIconWidth,showRightArrow:d.children&&d.children.length>0,hasChildren:d.children&&d.children.length>0,rawMenuItem:d,onSubMenuOpen:D=>{var p;return(p=d.onSubMenuOpen)==null?void 0:p.call(d,D)},onSubMenuClose:D=>{var p;return(p=d.onSubMenuClose)==null?void 0:p.call(d,D)}},e.createSlots({_:2},[d.children&&d.children.length>0?{name:"submenu",fn:e.withCtx(({context:D})=>[e.createVNode(I,{parentMenuItemContext:D,items:d.children,maxWidth:d.maxWidth,minWidth:d.minWidth,maxHeight:d.maxHeight,adjustPosition:d.adjustSubMenuPosition!==void 0?d.adjustSubMenuPosition:e.unref(c).adjustPosition,direction:d.direction!==void 0?d.direction:e.unref(c).direction},null,8,["parentMenuItemContext","items","maxWidth","minWidth","maxHeight","adjustPosition","direction"])]),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),d.hidden!==!0&&(d.divided==="down"||d.divided===!0)?(e.openBlock(),e.createBlock(le,{key:3})):e.createCommentVNode("",!0)],64))),128))])],512)]),_:3},8,["maxHeight"])],16)],8,["to"])):e.createCommentVNode("",!0)}}}),$e=e.defineComponent({__name:"ContextSubMenuWrapper",props:{options:{type:Object,default:null},show:{type:Boolean,default:null},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},emits:["close","closeAnimFinished"],setup(t,{expose:n,emit:o}){const r=t,a=o,l=e.useSlots(),c=e.ref(),{options:u,show:i,container:f}=e.toRefs(r);e.onMounted(()=>{i.value&&g()}),e.onBeforeUnmount(()=>{w()}),e.watch(i,s=>{s?g():(Se(m),w())});const m={closeMenu:C,isClosed:y,getMenuRef:()=>c.value,getMenuDimensions:()=>{var s;return((s=c.value)==null?void 0:s.getMenuDimensions())??{width:0,height:0}}};let b=!1;function g(){_(),Ot(m)}function C(s){b=!0,a("close",s),u.value.menuTransitionProps||a("closeAnimFinished"),Se(m)}function y(){return b}function _(){setTimeout(()=>{document.addEventListener("click",V,!0),document.addEventListener("contextmenu",V,!0),document.addEventListener("scroll",B,!0),!r.isFullScreenContainer&&f.value&&f.value.addEventListener("scroll",B,!0),u.value.keyboardControl!==!1&&document.addEventListener("keydown",k,!0)},50)}function w(){document.removeEventListener("contextmenu",V,!0),document.removeEventListener("click",V,!0),document.removeEventListener("scroll",B,!0),!r.isFullScreenContainer&&f.value&&f.value.removeEventListener("scroll",B,!0),u.value.keyboardControl!==!1&&document.removeEventListener("keydown",k,!0)}const x=e.ref();e.provide("globalSetCurrentSubMenu",s=>x.value=s),e.provide("globalGetMenuHostId",f.value.id);function k(s){var v,S,P,A,z,H,N,W,L,j,O,K,h;let E=!0;switch(s.key){case"Escape":{((v=x.value)==null?void 0:v.isTopLevel())===!1?(S=x.value)==null||S.closeCurrentSubMenu():C();break}case"ArrowDown":(P=x.value)==null||P.moveCurrentItemDown();break;case"ArrowUp":(A=x.value)==null||A.moveCurrentItemUp();break;case"Home":(z=x.value)==null||z.moveCurrentItemFirst();break;case"End":(H=x.value)==null||H.moveCurrentItemLast();break;case"ArrowLeft":{(N=x.value)!=null&&N.closeSelfAndActiveParent()||(L=(W=u.value).onKeyFocusMoveLeft)==null||L.call(W);break}case"ArrowRight":(j=x.value)!=null&&j.openCurrentItemSubMenu()||(K=(O=u.value).onKeyFocusMoveRight)==null||K.call(O);break;case"Enter":(h=x.value)==null||h.triggerCurrentItemClick(s);break;default:E=!1;break}E&&x.value&&(s.stopPropagation(),s.preventDefault())}function B(s){u.value.closeWhenScroll!==!1&&M(s.target,null)}function V(s){M(s.target,s)}function M(s,v){for(var S,P;s;){if(s.classList&&s.classList.contains("mx-context-menu"))return;s=s.parentNode}v?u.value.clickCloseOnOutside!==!1?(w(),C()):(P=(S=u.value).onClickOnOutside)==null||P.call(S,v):(w(),C())}return e.provide("globalOptions",u),e.provide("globalCloseMenu",C),e.provide("globalIsFullScreenContainer",r.isFullScreenContainer),e.provide("globalHasSlot",s=>l[s]!==void 0),e.provide("globalRenderSlot",(s,v)=>e.renderSlot(l,s,{...v},()=>[e.h("span","Render slot failed")],!1)),e.provide("menuContext",{zIndex:u.value.zIndex||$.defaultZindex,container:f.value,adjustPadding:{x:0,y:0},getZoom:()=>u.value.zoom||$.defaultZoom,getParentWidth:()=>0,getParentHeight:()=>0,getPositon:()=>[u.value.x,u.value.y],closeOtherSubMenuWithTimeOut:()=>{},checkCloseOtherSubMenuTimeOut:()=>!1,addOpenedSubMenu:()=>{},closeOtherSubMenu:()=>{},getParentContext:()=>null,getSubMenuInstanceContext:()=>null,getElement:()=>null,addChildMenuItem:()=>{},removeChildMenuItem:()=>{},markActiveMenuItem:()=>{},markThisOpenedByKeyBoard:()=>{},isOpenedByKeyBoardFlag:()=>!1,isMenuItemDataCollectedFlag:()=>!1}),n(m),(s,v)=>e.unref(u).menuTransitionProps?(e.openBlock(),e.createBlock(e.Transition,e.mergeProps({key:0,appear:""},e.unref(u).menuTransitionProps,{onAfterLeave:v[0]||(v[0]=S=>a("closeAnimFinished"))}),{default:e.withCtx(()=>[e.unref(i)?(e.openBlock(),e.createBlock(re,{key:0,ref_key:"submenuInstance",ref:c,items:e.unref(u).items,adjustPosition:e.unref(u).adjustPosition,maxWidth:e.unref(u).maxWidth||e.unref($).defaultMaxWidth,minWidth:e.unref(u).minWidth||e.unref($).defaultMinWidth,maxHeight:e.unref(u).maxHeight,direction:e.unref(u).direction||e.unref($).defaultDirection},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","maxHeight","direction"])):e.createCommentVNode("",!0)]),_:3},16)):e.unref(i)?(e.openBlock(),e.createBlock(re,{key:1,ref_key:"submenuInstance",ref:c,items:e.unref(u).items,adjustPosition:e.unref(u).adjustPosition,maxWidth:e.unref(u).maxWidth||e.unref($).defaultMaxWidth,minWidth:e.unref(u).minWidth||e.unref($).defaultMinWidth,maxHeight:e.unref(u).maxHeight,direction:e.unref(u).direction||e.unref($).defaultDirection},{default:e.withCtx(()=>[e.renderSlot(s.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","maxHeight","direction"])):e.createCommentVNode("",!0)}}),un=e.defineComponent({__name:"ContextMenu",props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},emits:["update:show","close"],setup(t,{expose:n,emit:o}){const r=o,a=t,{options:l,show:c}=e.toRefs(a),{isNew:u,container:i,eleId:f}=De(l.value),m=e.ref(null),b=e.useSlots();function g(C){var y,_;r("update:show",!1),r("close"),(_=(y=l.value).onClose)==null||_.call(y,C)}return n({closeMenu:()=>r("update:show",!1),isClosed:()=>!c.value,getMenuRef:()=>{var C;return(C=m.value)==null?void 0:C.getMenuRef()},getMenuDimensions:()=>{var C;return((C=m.value)==null?void 0:C.getMenuDimensions())??{width:0,height:0}}}),(C,y)=>(e.openBlock(),e.createBlock(e.Teleport,{to:`#${e.unref(f)}`},[e.createVNode($e,{ref_key:"menuRef",ref:m,options:e.unref(l),show:e.unref(c),container:e.unref(i),isFullScreenContainer:!e.unref(u),onClose:g},e.createSlots({_:2},[e.renderList(e.unref(b),(_,w)=>({name:w,fn:e.withCtx(x=>[e.renderSlot(C.$slots,w,e.normalizeProps(e.guardReactiveProps(x)))])}))]),1032,["options","show","container","isFullScreenContainer"])],8,["to"]))}}),cn=e.defineComponent({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxHeight:{type:[String,Number],default:0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup(t,n){const o=e.inject("globalOptions"),{adjustSubMenuPosition:r,maxWidth:a,minWidth:l,maxHeight:c}=e.toRefs(t),u=typeof r.value<"u"?r.value:o.value.adjustPosition,i=e.ref(),f=e.ref();return n.expose({getSubMenuRef:()=>i.value,getMenuItemRef:()=>f.value}),()=>e.h(Ce,{...t,ref:f,showRightArrow:!0,maxWidth:void 0,minWidth:void 0,maxHeight:void 0,adjustSubMenuPosition:void 0,hasChildren:typeof n.slots.default!==void 0},n.slots.default?{submenu:m=>e.h(re,{ref:i,maxWidth:a.value,minWidth:l.value,maxHeight:c.value,adjustPosition:u,parentMenuItemContext:m.context},{default:n.slots.default}),...Wt(n.slots,"default")}:n.slots)}});function dn(t,n,o,r){const a=e.ref(!0),l=e.h($e,{options:t,show:a.value,container:n,isFullScreenContainer:!o,onCloseAnimFinished:()=>{e.render(null,n)},onClose:c=>{var u;(u=t.onClose)==null||u.call(t,c),a.value=!1}},r);return e.render(l,n),l.component}function Ie(t,n){const o=De(t);return dn(t,o.container,o.isNew,n).exposed}const Fe={install(t){t.config.globalProperties.$contextmenu=Ie,t.component("ContextMenu",un),t.component("ContextMenuItem",Ce),t.component("ContextMenuGroup",cn),t.component("ContextMenuSperator",le),t.component("ContextMenuSeparator",le),t.component("ContextSubMenu",re)},showContextMenu(t,n){return Ie(t,n)},isAnyContextMenuOpen(){return Nt()},closeContextMenu:je,transformMenuPosition:Pt},fn={class:"header-buttons"},mn={class:"content"},vn={__name:"FloatingTreeViewer",props:{data:{},dataModifiers:{}},emits:e.mergeModels(["openEdit","close","update:docked"],["update:data"]),setup(t,{emit:n}){const o=e.useModel(t,"data"),{removeElement:r,pasteElement:a,insertElement:l}=He(o),c=n,u=e.inject("componentClipboard"),i=e.ref([]);function f(){i.value.forEach(s=>{s&&(s.isExpanded=!0,b(s))})}function m(){i.value.forEach(s=>{s&&(s.isExpanded=!1,g(s))})}function b(s){s.$refs.treeNodes&&s.$refs.treeNodes.forEach(v=>{v&&(v.isExpanded=!0,b(v))})}function g(s){s.$refs.treeNodes&&s.$refs.treeNodes.forEach(v=>{v&&(v.isExpanded=!1,g(v))})}function C(s,v){let S=s.path?[v,...s.path]:[v];const P=[{label:"Edit",onClick:()=>{c("openEdit",{element:s.element,path:S})}}];P.push({label:"Cut",onClick:()=>{u.cut(s.element,S),u.isCut&&r(S)}},{label:"Copy",onClick:()=>{u.copy(s.element,S)}}),u.hasContent()&&P.push({label:"Paste",children:[{label:"Paste as Prepend",onClick:()=>a(S,"prepend")},{label:"Paste as Append",onClick:()=>a(S,"append")},{label:"Paste as Child",onClick:()=>a(S,"child")}]}),P.push(Le(l,S)),Fe.showContextMenu({x:s.event.x,y:s.event.y,zIndex:1001,items:P})}const y=e.ref({top:20,left:20}),_=e.ref(!1);let w=!1,x={x:0,y:0};function k(){_.value=!_.value,c("update:docked",_.value),_.value?y.value={top:0,right:0,bottom:0}:y.value={top:20,left:20}}function B(s){_.value||(w=!0,x.x=s.clientX-y.value.left,x.y=s.clientY-y.value.top,document.addEventListener("mousemove",V),document.addEventListener("mouseup",M))}function V(s){w&&(y.value.left=s.clientX-x.x,y.value.top=s.clientY-x.y)}function M(){w=!1,document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",M)}return e.onBeforeUnmount(()=>{document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",M)}),(s,v)=>{const S=e.resolveComponent("v-icon"),P=e.resolveComponent("v-btn");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["floating-tree-viewer",{docked:_.value}]),style:e.normalizeStyle(_.value?y.value:{top:y.value.top+"px",left:y.value.left+"px"})},[e.createElementVNode("div",{class:"header",onMousedown:B},[v[4]||(v[4]=e.createElementVNode("span",null,"JSON Tree Viewer",-1)),e.createElementVNode("div",fn,[e.createVNode(P,{icon:"",density:"compact",onClick:f,title:"Expand All"},{default:e.withCtx(()=>[e.createVNode(S,null,{default:e.withCtx(()=>v[1]||(v[1]=[e.createTextVNode("fa-solid fa-angle-double-down")])),_:1,__:[1]})]),_:1}),e.createVNode(P,{icon:"",density:"compact",onClick:m,title:"Collapse All"},{default:e.withCtx(()=>[e.createVNode(S,null,{default:e.withCtx(()=>v[2]||(v[2]=[e.createTextVNode("fa-solid fa-angle-double-up")])),_:1,__:[2]})]),_:1}),e.createVNode(P,{icon:"",density:"compact",onClick:k},{default:e.withCtx(()=>[e.createVNode(S,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(_.value?"fa-solid fa-arrow-left":"fa-solid fa-arrow-right"),1)]),_:1})]),_:1}),e.createVNode(P,{icon:"",density:"compact",onClick:v[0]||(v[0]=A=>s.$emit("close"))},{default:e.withCtx(()=>v[3]||(v[3]=[e.createTextVNode("x")])),_:1,__:[3]})])],32),e.createElementVNode("div",mn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,(A,z)=>(e.openBlock(),e.createBlock(ze,{node:A,label:"root",onOpenEdit:H=>C(H,z),ref_for:!0,ref_key:"treeNodes",ref:i},null,8,["node","onOpenEdit"]))),256))])],6)}}},pn=Z(vn,[["__scopeId","data-v-5898d76b"]]);var Ue=function(){if(typeof Map<"u")return Map;function t(n,o){var r=-1;return n.some(function(a,l){return a[0]===o?(r=l,!0):!1}),r}return function(){function n(){this.__entries__=[]}return Object.defineProperty(n.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),n.prototype.get=function(o){var r=t(this.__entries__,o),a=this.__entries__[r];return a&&a[1]},n.prototype.set=function(o,r){var a=t(this.__entries__,o);~a?this.__entries__[a][1]=r:this.__entries__.push([o,r])},n.prototype.delete=function(o){var r=this.__entries__,a=t(r,o);~a&&r.splice(a,1)},n.prototype.has=function(o){return!!~t(this.__entries__,o)},n.prototype.clear=function(){this.__entries__.splice(0)},n.prototype.forEach=function(o,r){r===void 0&&(r=null);for(var a=0,l=this.__entries__;a<l.length;a++){var c=l[a];o.call(r,c[1],c[0])}},n}()}(),he=typeof window<"u"&&typeof document<"u"&&window.document===document,ae=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),hn=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(ae):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),gn=2;function Cn(t,n){var o=!1,r=!1,a=0;function l(){o&&(o=!1,t()),r&&u()}function c(){hn(l)}function u(){var i=Date.now();if(o){if(i-a<gn)return;r=!0}else o=!0,r=!1,setTimeout(c,n);a=i}return u}var bn=20,yn=["top","right","bottom","left","width","height","size","weight"],kn=typeof MutationObserver<"u",xn=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Cn(this.refresh.bind(this),bn)}return t.prototype.addObserver=function(n){~this.observers_.indexOf(n)||this.observers_.push(n),this.connected_||this.connect_()},t.prototype.removeObserver=function(n){var o=this.observers_,r=o.indexOf(n);~r&&o.splice(r,1),!o.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var n=this.updateObservers_();n&&this.refresh()},t.prototype.updateObservers_=function(){var n=this.observers_.filter(function(o){return o.gatherActive(),o.hasActive()});return n.forEach(function(o){return o.broadcastActive()}),n.length>0},t.prototype.connect_=function(){!he||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),kn?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!he||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(n){var o=n.propertyName,r=o===void 0?"":o,a=yn.some(function(l){return!!~r.indexOf(l)});a&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Ke=function(t,n){for(var o=0,r=Object.keys(n);o<r.length;o++){var a=r[o];Object.defineProperty(t,a,{value:n[a],enumerable:!1,writable:!1,configurable:!0})}return t},Y=function(t){var n=t&&t.ownerDocument&&t.ownerDocument.defaultView;return n||ae},Ge=se(0,0,0,0);function ie(t){return parseFloat(t)||0}function Re(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return n.reduce(function(r,a){var l=t["border-"+a+"-width"];return r+ie(l)},0)}function _n(t){for(var n=["top","right","bottom","left"],o={},r=0,a=n;r<a.length;r++){var l=a[r],c=t["padding-"+l];o[l]=ie(c)}return o}function wn(t){var n=t.getBBox();return se(0,0,n.width,n.height)}function Bn(t){var n=t.clientWidth,o=t.clientHeight;if(!n&&!o)return Ge;var r=Y(t).getComputedStyle(t),a=_n(r),l=a.left+a.right,c=a.top+a.bottom,u=ie(r.width),i=ie(r.height);if(r.boxSizing==="border-box"&&(Math.round(u+l)!==n&&(u-=Re(r,"left","right")+l),Math.round(i+c)!==o&&(i-=Re(r,"top","bottom")+c)),!En(t)){var f=Math.round(u+l)-n,m=Math.round(i+c)-o;Math.abs(f)!==1&&(u-=f),Math.abs(m)!==1&&(i-=m)}return se(a.left,a.top,u,i)}var Sn=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof Y(t).SVGGraphicsElement}:function(t){return t instanceof Y(t).SVGElement&&typeof t.getBBox=="function"}}();function En(t){return t===Y(t).document.documentElement}function Vn(t){return he?Sn(t)?wn(t):Bn(t):Ge}function Mn(t){var n=t.x,o=t.y,r=t.width,a=t.height,l=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,c=Object.create(l.prototype);return Ke(c,{x:n,y:o,width:r,height:a,top:o,right:n+r,bottom:a+o,left:n}),c}function se(t,n,o,r){return{x:t,y:n,width:o,height:r}}var Nn=function(){function t(n){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=se(0,0,0,0),this.target=n}return t.prototype.isActive=function(){var n=Vn(this.target);return this.contentRect_=n,n.width!==this.broadcastWidth||n.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var n=this.contentRect_;return this.broadcastWidth=n.width,this.broadcastHeight=n.height,n},t}(),On=function(){function t(n,o){var r=Mn(o);Ke(this,{target:n,contentRect:r})}return t}(),Pn=function(){function t(n,o,r){if(this.activeObservations_=[],this.observations_=new Ue,typeof n!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=n,this.controller_=o,this.callbackCtx_=r}return t.prototype.observe=function(n){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(n instanceof Y(n).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(n)||(o.set(n,new Nn(n)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(n){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(n instanceof Y(n).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(n)&&(o.delete(n),o.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var n=this;this.clearActive(),this.observations_.forEach(function(o){o.isActive()&&n.activeObservations_.push(o)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var n=this.callbackCtx_,o=this.activeObservations_.map(function(r){return new On(r.target,r.broadcastRect())});this.callback_.call(n,o,n),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),qe=typeof WeakMap<"u"?new WeakMap:new Ue,Je=function(){function t(n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var o=xn.getInstance(),r=new Pn(n,o,this);qe.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){Je.prototype[t]=function(){var n;return(n=qe.get(this))[t].apply(n,arguments)}});var In=function(){return typeof ae.ResizeObserver<"u"?ae.ResizeObserver:Je}();const We=["blur","input","change","changeSelectionStyle","changeSession","copy","focus","paste"],Rn=e.defineComponent({name:"VAceEditor",props:{value:{type:String,required:!0},lang:{type:String,default:"text"},theme:{type:String,default:"chrome"},options:Object,placeholder:String,readonly:Boolean,wrap:Boolean,printMargin:{type:[Boolean,Number],default:!0},minLines:Number,maxLines:Number},emits:["update:value","init",...We],render(){return e.h("div")},mounted(){const t=this._editor=e.markRaw(Ye.edit(this.$el,{placeholder:this.placeholder,readOnly:this.readonly,value:this.value,mode:"ace/mode/"+this.lang,theme:"ace/theme/"+this.theme,wrap:this.wrap,printMargin:this.printMargin,useWorker:!1,minLines:this.minLines,maxLines:this.maxLines,...this.options}));this._contentBackup=this.value,this._isSettingContent=!1,t.on("change",()=>{if(this._isSettingContent)return;const n=t.getValue();this._contentBackup=n,this.$emit("update:value",n)}),We.forEach(n=>{const o="on"+e.capitalize(n);typeof this.$.vnode.props[o]=="function"&&t.on(n,this.$emit.bind(this,n))}),this._ro=new In(()=>t.resize()),this._ro.observe(this.$el),this.$emit("init",t)},beforeUnmount(){var t,n;(t=this._ro)===null||t===void 0||t.disconnect(),(n=this._editor)===null||n===void 0||n.destroy()},methods:{focus(){this._editor.focus()},blur(){this._editor.blur()},selectAll(){this._editor.selectAll()},getAceInstance(){return this._editor}},watch:{value(t){if(this._contentBackup!==t){try{this._isSettingContent=!0,this._editor.setValue(t,1)}finally{this._isSettingContent=!1}this._contentBackup=t}},theme(t){this._editor.setTheme("ace/theme/"+t)},options(t){this._editor.setOptions(t)},readonly(t){this._editor.setReadOnly(t)},placeholder(t){this._editor.setOption("placeholder",t)},wrap(t){this._editor.setWrapBehavioursEnabled(t)},printMargin(t){this._editor.setOption("printMargin",t)},lang(t){this._editor.setOption("mode","ace/mode/"+t)},minLines(t){this._editor.setOption("minLines",t)},maxLines(t){this._editor.setOption("maxLines",t)}}}),Wn={key:0},Tn={key:1,class:"editor-loading"},An={__name:"AceEditorWrap",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(t,{emit:n}){const o=t,r=n,a=e.ref(""),l=e.shallowRef(null),c=e.ref(!1);e.onMounted(()=>{try{const i=document.createElement("script");i.src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.0/ace.js",i.async=!0,i.onload=()=>{window.ace.require("ace/mode/json"),window.ace.require("ace/theme/chrome"),window.ace.require("ace/worker/json"),a.value=JSON.stringify(o.modelValue,null,2),c.value=!0},document.head.appendChild(i)}catch(i){console.error("Failed to initialize Ace editor:",i)}}),e.watch(a,i=>{try{r("update:modelValue",JSON.parse(i))}catch(f){console.log(f)}});const u={useWorker:!0,showPrintMargin:!1,fontSize:14,tabSize:2,showGutter:!0,highlightActiveLine:!0};return(i,f)=>c.value?(e.openBlock(),e.createElementBlock("div",Wn,[e.createVNode(e.unref(Rn),{value:a.value,"onUpdate:value":f[0]||(f[0]=m=>a.value=m),lang:"json",theme:"chrome",style:{height:"600px"},options:u,onInit:f[1]||(f[1]=m=>l.value=m)},null,8,["value"])])):(e.openBlock(),e.createElementBlock("div",Tn," Loading editor... "))}},Hn=Z(An,[["__scopeId","data-v-de573f42"]]),Ln={id:"content-editor"},zn={class:"preview-container fill-height"},jn={__name:"ComponentEditor",props:{modelValue:{default:[]},modelModifiers:{}},emits:["update:modelValue"],setup(t){const n=e.inject("componentClipboard"),o=e.ref(!1),r=e.ref({component:"",props:{}}),a=e.ref(!1),l=e.ref(!1),c=e.ref(!1),u=e.ref(!1),i=e.ref(!1),f=e.ref([]),m=e.ref(""),b=e.useModel(t,"modelValue"),{removeElement:g,pasteElement:C,insertElement:y}=He(b);function _(M){n.copy(M,null)}function w(M){const s=[...b.value],v=f.value.pop(),S=f.value.reduce((P,A)=>P[A],s);S&&(S[v]=M),b.value=s,a.value=!1,r.value={},f.value=[]}function x({element:M,path:s}){f.value=s,a.value=!0,r.value=M}const k=M=>{b.value=M};function B(){if(m.value===""){alert("Please select a component");return}b.value.push({component:m.value,props:{}}),o.value=!1,m.value=""}function V(M,s,v){if(!M)return;M.preventDefault();const S=[{label:"Edit",onClick:()=>{x({element:s,path:v})}},{label:"Cut",onClick:()=>{n.cut(s,v),n.isCut&&g(v)}},{label:"Copy",onClick:()=>{n.copy(s,v)}}];n.hasContent()&&S.push({label:"Paste",children:[{label:"Paste as Prepend",onClick:()=>C(v,"prepend")},{label:"Paste as Append",onClick:()=>C(v,"append")},{label:"Paste as Child",onClick:()=>C(v,"child")}]}),S.push(Le(y,v)),S.push({label:"Delete",onClick:()=>{g(v)}}),Fe.showContextMenu({x:M.x,y:M.y,items:S})}return(M,s)=>{const v=e.resolveComponent("v-btn"),S=e.resolveComponent("v-spacer"),P=e.resolveComponent("v-list-item-title"),A=e.resolveComponent("v-list-item"),z=e.resolveComponent("v-list"),H=e.resolveComponent("v-menu"),N=e.resolveComponent("v-toolbar"),W=e.resolveComponent("v-col"),L=e.resolveComponent("v-row"),j=e.resolveComponent("v-card-title"),O=e.resolveComponent("v-combobox"),K=e.resolveComponent("v-card-text"),h=e.resolveComponent("v-card-actions"),E=e.resolveComponent("v-card"),I=e.resolveComponent("v-dialog");return e.openBlock(),e.createElementBlock("div",Ln,[e.createVNode(N,{class:"mb-2"},{default:e.withCtx(()=>[e.createVNode(v,{active:u.value,onClick:s[0]||(s[0]=d=>u.value=!u.value),icon:"fa-solid fa-code"},null,8,["active"]),e.createVNode(v,{active:i.value,onClick:s[1]||(s[1]=d=>i.value=!i.value)},{default:e.withCtx(()=>s[14]||(s[14]=[e.createTextVNode("Draggable")])),_:1,__:[14]},8,["active"]),e.createVNode(v,{onClick:s[2]||(s[2]=d=>o.value=!0),icon:"fa-solid fa-plus"}),e.createVNode(v,{onClick:s[3]||(s[3]=d=>l.value=!l.value),icon:"fa-solid fa-tree"}),e.createVNode(S),e.createVNode(H,null,{activator:e.withCtx(({props:d})=>[e.createVNode(v,e.mergeProps(d,{icon:"fa-solid fa-clipboard"}),null,16)]),default:e.withCtx(()=>[e.createVNode(z,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(Ae),d=>(e.openBlock(),e.createBlock(A,{key:d.title,onClick:G=>_(d)},{default:e.withCtx(()=>[e.createVNode(P,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),e.createVNode(L,null,{default:e.withCtx(()=>[u.value?(e.openBlock(),e.createBlock(W,{key:0,cols:12},{default:e.withCtx(()=>[e.createVNode(Hn,{modelValue:b.value,"onUpdate:modelValue":s[4]||(s[4]=d=>b.value=d)},null,8,["modelValue"])]),_:1})):(e.openBlock(),e.createBlock(W,{key:1,cols:12,class:"bordered fill-height"},{default:e.withCtx(()=>[e.createElementVNode("div",zn,[e.createElementVNode("div",{class:e.normalizeClass(["preview-content",{"has-docked-tree":l.value&&c.value}])},[e.createVNode(pe,{modelValue:b.value,"onUpdate:modelValue":s[5]||(s[5]=d=>b.value=d),onUpdateSections:k,draggable_pro:i.value,onOpenEdit:s[6]||(s[6]=({event:d,element:G,path:D})=>V(d,G,D))},null,8,["modelValue","draggable_pro"])],2),l.value?(e.openBlock(),e.createBlock(pn,{key:0,data:b.value,"onUpdate:data":s[7]||(s[7]=d=>b.value=d),onClose:s[8]||(s[8]=d=>l.value=!1),onOpenEdit:x,"onUpdate:docked":s[9]||(s[9]=d=>c.value=d)},null,8,["data"])):e.createCommentVNode("",!0)])]),_:1}))]),_:1}),e.createVNode(I,{modelValue:o.value,"onUpdate:modelValue":s[12]||(s[12]=d=>o.value=d),"max-width":"500px"},{default:e.withCtx(()=>[e.createVNode(E,null,{default:e.withCtx(()=>[e.createVNode(j,null,{default:e.withCtx(()=>s[15]||(s[15]=[e.createElementVNode("span",{class:"text-h5"},"Add Component",-1)])),_:1,__:[15]}),e.createVNode(K,null,{default:e.withCtx(()=>[e.createVNode(O,{items:e.unref(nt),modelValue:m.value,"onUpdate:modelValue":s[10]||(s[10]=d=>m.value=d),label:"Component Name"},null,8,["items","modelValue"])]),_:1}),e.createVNode(h,null,{default:e.withCtx(()=>[e.createVNode(v,{color:"red",onClick:s[11]||(s[11]=d=>o.value=!1)},{default:e.withCtx(()=>s[16]||(s[16]=[e.createTextVNode("Cancel")])),_:1,__:[16]}),e.createVNode(v,{onClick:B,color:"primary"},{default:e.withCtx(()=>s[17]||(s[17]=[e.createTextVNode("Add")])),_:1,__:[17]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e.createVNode(xt,{data:r.value,dialog:a.value,"onUpdate:dialog":s[13]||(s[13]=d=>a.value=d),onDataSaved:w},null,8,["data","dialog"])])}}},Dn={install(t,n={}){t.component("ComponentEditor",jn),n.componentClipboard&&t.provide("componentClipboard",n.componentClipboard)}};module.exports=Dn;
